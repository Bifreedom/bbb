import{_ as G,e as g,f as L,g as I,h as O,i as U,c as h,a as v,j as b,t as _,F as W,k as H,n as J,o as m,l as K,m as S}from"./index-ZzaR1yTC.js";const Q={class:"page"},Y={class:"controls"},Z={class:"btns"},ee=["disabled"],se=["disabled"],te=["disabled"],ne={class:"stats"},ae={key:0},ie={key:1,class:"won"},oe={key:2,class:"lost"},le=["onClick","onContextmenu","disabled"],ue={key:1},re={key:2},ve={__name:"Minesweeper",setup(de){function T(s,t){return{id:`${s}-${t}`,x:s,y:t,isMine:!1,isRevealed:!1,isFlagged:!1,neighborMines:0}}const o=g(9),u=g(9),M=g(10),d=L([]),C=g(!1),f=g(!1),c=g(!1),y=g(!1),x=g(null),k=g(0);function j(){R(),k.value=0,x.value=setInterval(()=>{k.value++},1e3)}function R(){x.value&&(clearInterval(x.value),x.value=null)}function F(){d.length=0;for(let s=0;s<u.value;s++){const t=[];for(let e=0;e<o.value;e++)t.push(T(e,s));d.push(t)}C.value=!1,f.value=!1,c.value=!1,y.value=!0,j()}function $(s,t){const e=[];for(let n=-1;n<=1;n++)for(let i=-1;i<=1;i++){if(i===0&&n===0)continue;const r=s+i,a=t+n;r>=0&&r<o.value&&a>=0&&a<u.value&&e.push(d[a][r])}return e}function z(s){const t=o.value*u.value,e=Math.min(M.value,t-1),n=s?s.id:null,i=[];for(let a=0;a<u.value;a++)for(let l=0;l<o.value;l++){const p=`${l}-${a}`;p!==n&&i.push(p)}for(let a=i.length-1;a>0;a--){const l=Math.floor(Math.random()*(a+1));[i[a],i[l]]=[i[l],i[a]]}const r=new Set(i.slice(0,e));for(let a=0;a<u.value;a++)for(let l=0;l<o.value;l++){const p=d[a][l];p.isMine=r.has(p.id)}for(let a=0;a<u.value;a++)for(let l=0;l<o.value;l++){const p=d[a][l];p.neighborMines=$(l,a).filter(D=>D.isMine).length}C.value=!0}function E(s){if(!(f.value||c.value)&&!(s.isFlagged||s.isRevealed)){if(C.value||z(s),s.isMine){s.isRevealed=!0,f.value=!0,R();for(let t=0;t<u.value;t++)for(let e=0;e<o.value;e++){const n=d[t][e];n.isMine&&(n.isRevealed=!0)}return}N(s),X()}}function N(s){const t=[s];for(;t.length;){const e=t.shift();if(!(e.isRevealed||e.isFlagged)&&(e.isRevealed=!0,e.neighborMines===0))for(const n of $(e.x,e.y))!n.isRevealed&&!n.isFlagged&&!n.isMine&&t.push(n)}}function P(s){f.value||c.value||s.isRevealed||(s.isFlagged=!s.isFlagged)}const V=I(()=>{var t;let s=0;for(let e=0;e<u.value;e++){const n=d[e];if(!n)continue;const i=Math.min(o.value,n.length);for(let r=0;r<i;r++)(t=n[r])!=null&&t.isFlagged&&s++}return s});function X(){for(let s=0;s<u.value;s++)for(let t=0;t<o.value;t++){const e=d[s][t];if(!e.isMine&&!e.isRevealed)return}c.value=!0,R()}const q=I(()=>{const s=[];for(let t=0;t<u.value;t++){const e=d[t];if(!e)continue;const n=Math.min(o.value,e.length);for(let i=0;i<n;i++){const r=e[i];r&&s.push(r)}}return s});function w(s){s==="easy"?(o.value=9,u.value=9,M.value=10):s==="medium"?(o.value=16,u.value=16,M.value=40):s==="hard"&&(o.value=30,u.value=16,M.value=99),B()}function B(){F()}function A(s){return{revealed:s.isRevealed,mine:s.isRevealed&&s.isMine,flagged:!s.isRevealed&&s.isFlagged}}return O(()=>{F()}),U(()=>R()),(s,t)=>(m(),h("section",Q,[t[4]||(t[4]=v("h2",null,"扫雷 Minesweeper",-1)),v("div",Y,[v("div",Z,[v("button",{disabled:y.value&&!f.value&&!c.value,onClick:t[0]||(t[0]=e=>w("easy"))},"新手 9x9·10",8,ee),v("button",{disabled:y.value&&!f.value&&!c.value,onClick:t[1]||(t[1]=e=>w("medium"))},"中级 16x16·40",8,se),v("button",{disabled:y.value&&!f.value&&!c.value,onClick:t[2]||(t[2]=e=>w("hard"))},"专家 16x30·99",8,te),v("button",{onClick:t[3]||(t[3]=e=>B())},"重开")]),v("div",ne,[v("span",null,"大小: "+_(u.value)+"×"+_(o.value),1),v("span",null,"地雷: "+_(M.value),1),v("span",null,"旗子: "+_(V.value)+"/"+_(M.value),1),k.value>0?(m(),h("span",ae,"用时: "+_(k.value)+"s",1)):b("",!0),c.value?(m(),h("span",ie,"通关!")):f.value?(m(),h("span",oe,"踩雷了…")):b("",!0)])]),v("div",{class:"board",style:J({gridTemplateColumns:"repeat("+o.value+", var(--cell))"})},[(m(!0),h(W,null,H(q.value,e=>(m(),h("button",{key:e.id,class:S(["cell",A(e)]),onClick:n=>E(e),onContextmenu:K(n=>P(e),["prevent"]),disabled:f.value||c.value},[e.isRevealed&&!e.isMine&&e.neighborMines>0?(m(),h("span",{key:0,class:S("n"+e.neighborMines)},_(e.neighborMines),3)):b("",!0),e.isRevealed&&e.isMine?(m(),h("span",ue,"💣")):b("",!0),!e.isRevealed&&e.isFlagged?(m(),h("span",re,"🚩")):b("",!0)],42,le))),128))],4)]))}},ce=G(ve,[["__scopeId","data-v-baa22d0b"]]);export{ce as default};
